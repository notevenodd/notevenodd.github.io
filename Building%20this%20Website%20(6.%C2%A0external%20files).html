<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="generator" content="TiddlyWiki" />
<meta name="tiddlywiki-version" content="5.1.8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-emplates/htmlbar-style" content="black-translucent" />
<meta name="format-detection" content="telephone=no">
<!-- <link id="faviconLink" rel="shortcut icon" href="favicon.ico"> -->
<link rel="shortcut icon" href="res/favicon.png" />
<link rel="stylesheet" href="static.css">
<title>Not Even Odd — Musings and mumblings of a random nerd</title>
</head>
<body class="tc-body">

<section class="tc-story-river">

<p><div class="tc-tiddler-frame tc-tiddler-view-frame tc-tiddler-exists   tc-tagged-Not%20Even%20Odd tc-tagged-TiddlyWiki"><div class="tc-tiddler-title">
<div class="tc-titlebar">
<span class="tc-tiddler-controls">
<span class=" tc-reveal"><button aria-label="more" class="tc-btn-invisible" title="More actions">


</button><span class=" tc-reveal" hidden="true"></span></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="edit" class="tc-btn-invisible" title="Edit this tiddler">


</button></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal" hidden="true"></span><span class=" tc-reveal"><button aria-label="close" class="tc-btn-invisible" title="Close this tiddler">


</button></span>
</span>

<span class="tc-tiddler-title-icon" style="fill:;">

</span>



<h2 class="tc-title">
Building this Website (6. external files)
</h2>

</div>

<div class="tc-tiddler-info tc-popup-handle tc-reveal" hidden="true"></div>
</div><div class="tc-subtitle">
<a class="tc-tiddlylink tc-tiddlylink-missing" href=".html">

</a> Sunday, May 3, 2015
</div>
<div class="tc-tags-wrapper"><span class="tc-tag-list-item">

<p>
  <div class="tc-btn-invisible tc-tag-label" style="background-color:#000000;
fill:#ffffff;
color:#ffffff;">
    <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html">
       Not Even Odd
    </a>
  </div>
</p><p><span class=" tc-reveal" hidden="true"></span>
</p>

</span>
<span class="tc-tag-list-item">

<p>
  <div class="tc-btn-invisible tc-tag-label" style="background-color:#c8aed5;
fill:#333333;
color:#333333;">
    <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWiki.html">
       TiddlyWiki
    </a>
  </div>
</p><p><span class=" tc-reveal" hidden="true"></span>
</p>

</span>
</div>

<div class="tc-tiddler-body"><p class="box">This is a series of posts which technically describes how <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html">Not Even Odd</a> is built. It is primarily meant as a guide for static website creation using <a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWiki.html">TiddlyWiki</a>. 
</p><p><div class="borderless" style="float:right; max-width:280px !important; padding=0; spacing=0;">
<table class="borderless" style="padding=0; spacing=0;"><tr><td style="text-align:center;"><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html"><img src="res/notevenodd.png"></a></td></tr><tr><td><p><div style="text-align:center; font-weight: bold;"><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website.html">Building this Website</a></div></p><p><strong>Static site with TiddlyWiki</strong></p><ul><li>1. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(1.%25C2%25A0content%25C2%25A0selection).html">content selection</a></li><li>2. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(2.%25C2%25A0template).html">creating a template</a></li><li>3. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(3.%25C2%25A0navigation).html">creating navigation</a></li><li>4. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(4.%25C2%25A0tags).html">tags</a></li><li>5. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(5.%25C2%25A0tiddlers'%25C2%25A0date).html">fixing tiddler's date</a></li><li>6. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(6.%25C2%25A0external%2520files).html">external files</a></li><li>7. <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(7.%25C2%25A0plugins).html">plugins</a> (<strong>TODO</strong>)</li></ul><p><strong>Hosting with GitHub</strong></p><ul><li>hosting (to be published soon...)</li></ul></td></tr></table>
</div></p><p>In a single-file TiddlyWiki, images are usually either referenced by their location (file or URL) or <a class="tc-tiddlylink-external" href="http://tiddlywiki.com/#ImportTiddlers" target="_blank">embedded</a> (in <a class="tc-tiddlylink-external" href="http://en.wikipedia.org/wiki/Base64" target="_blank">base64</a> representation) in TiddlyWiki itself. Embedding content is useful feature for the 'single file' paradigm as it makes sharing easier, but it's not very suitable for large images. In case of generating a static site embedding images may not be desirable in most cases.</p><p>Unfortunately, referencing an image file by its location on the file system doesn't seem to work when running TiddlyWiki on <strong>node.js</strong>. Interestingly, TiddlyWiki has a concept called <a class="tc-tiddlylink-external" href="http://tiddlywiki.com/#ExternalImages" target="_blank">&quot;external images&quot;</a> which are tiddlers with a field named <code>_canonical_uri</code> whose value points to an external image. I tried (hard) to make use of it, but for a reason or <a class="tc-tiddlylink-external" href="https://github.com/Jermolene/TiddlyWiki5/issues/1000" target="_blank">another</a>, it didn't work to display images.</p><p>So I finally went with another solution: I created a folder <code>res</code> where I place my images (and any other &quot;resource&quot; file I want to link to) and then I use a small static webserver to serve the content of that directory. With that setup, a reference to an image/resource file <code>res/RESOURCE</code> thus becomes <code>res/RESOURCE</code> (as TiddlyWiki on node.js uses port 8080, I use port 8081 to serve resources).</p><p>Then during the static site generation, http links to resources needs to be converted back to relative links. For example, it can be done like this:</p><pre class="sh hljs"><code><span class="hljs-comment"># static site generation:</span>
tiddlywiki --rendertiddlers ...

<span class="hljs-comment"># res folder in output with correct relative links:</span>
cp <span class="hljs-operator">-a</span> res output
sed -i s,<span class="hljs-string">"res/"</span>,<span class="hljs-string">"res/"</span>,g output/*.html</code></pre><p>Again, perhaps not the most &quot;elegant&quot; solution (in the spirit of TiddlWiki), but it works, and using the shell is far easier than trying to modify TiddlyWiki with your own <a class="tc-tiddlylink-external" href="http://tiddlywiki.com/#PluginMechanism" target="_blank">plugins</a>.</p><br><hr><p><strong>Tip</strong>: As the http server to serve resources, you can <a class="tc-tiddlylink-external" href="https://gist.github.com/ryanflorence/701407" target="_blank">use one on top of node.js</a> or even simpler if you have <strong>python</strong> installed on your system, you can just use (one of) this (depending on which python version you have):</p><pre class="sh hljs"><code><span class="hljs-built_in">cd</span> res ; python3 -m http.server <span class="hljs-number">8081</span></code></pre><pre class="sh hljs"><code><span class="hljs-built_in">cd</span> res ; python2 -m SimpleHTTPServer <span class="hljs-number">8081</span></code></pre><p><br> <div style="float:left;"><strong>previous</strong>: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(5.%25C2%25A0tiddlers'%25C2%25A0date).html">fixing tiddlers' date</a></div><div style="float:right;">
<strong>next</strong>: <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(7.%25C2%25A0plugins).html">plugins</a></div></p></div>



</div>

</p>

</section>


<div class="tc-sidebar-scrollable">
<div class="tc-sidebar-header" style="max-width:320px !important;">
   <h1 class="tc-site-title">
   Not Even Odd
   </h1>
   <div class="tc-site-subtitle">
   <p>Musings and mumblings of a <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html">random nerd</a></p>
   </div>
   <p>Last 10 Posts:</p><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(7.%25C2%25A0plugins).html">Building this Website (7. plugins)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(6.%25C2%25A0external%2520files).html">Building this Website (6. external files)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(5.%25C2%25A0tiddlers'%25C2%25A0date).html">Building this Website (5. tiddlers' date)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(4.%25C2%25A0tags).html">Building this Website (4. tags)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(3.%25C2%25A0navigation).html">Building this Website (3. navigation)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(2.%25C2%25A0template).html">Building this Website (2. template)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website%2520(1.%25C2%25A0content%25C2%25A0selection).html">Building this Website (1. content selection)</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Building%2520this%2520Website.html">Building this Website</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html">Not Even Odd</a></div><div><a class="tc-tiddlylink tc-tiddlylink-resolves" href="TiddlyWiki.html">TiddlyWiki</a></div><p><table class="borderless" style="border:0"><tr><td>Tags<br><sup><a class="tc-tiddlylink tc-tiddlylink-resolves" href="All%2520Tags.html">see all tags</a></sup></td><td>    All Posts<br>    <sup>(<a class="tc-tiddlylink tc-tiddlylink-resolves" href="All%2520Posts%2520(Alphabetical%2520Order).html">alphabetically</a> | <a class="tc-tiddlylink tc-tiddlylink-resolves" href="All%2520Posts%2520(Chronological%2520Order).html">chronologically</a>)</sup></td></tr></table></p>
   <p><div class="vertical_align">
Follow:
  <a href="javascript:alert('under construction!');"><img src="res/icon_small_feed.png"></a>
 <a href="http://twitter.com/notevenodd"><img src="res/icon_small_twitter.png"></a>
 <a href="http://facebook.com/notevenodd"><img src="res/icon_small_facebook.png"></a>
 <a href="http://github.com/notevenodd"><img src="res/icon_small_github.png"></a>
 <a class="tc-tiddlylink tc-tiddlylink-resolves" href="Not%2520Even%2520Odd.html">...</a>
</div></p>
</div>
</div>


</body>
</html>